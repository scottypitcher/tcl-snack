# Commands covered: sound configure
#

package require -exact snack 1.7

if {[lsearch [namespace children] ::tcltest] == -1} {
    package require tcltest
    namespace import ::tcltest::*
}

test configure-1.1 {configure command, bad args} {
  set s [snack::sound snd]
  set res [list [catch {$s configure -junk} msg] $msg]
  $s destroy
  set res
} {1 {bad option "-junk": must be -load, -file, -channel, -frequency, -channels, -format, -byteorder, -buffersize, -skiphead, -guessproperties, or -debug}}

test configure-1.2 {configure command, get option -load} {
  set s [snack::sound snd -load ex1.wav]
  set res [$s configure -load]
  $s destroy
  set res
} {ex1.wav}

test configure-1.3 {configure command, get option -file} {
  set s [snack::sound snd -file ex1.wav]
  set res [$s configure -file]
  $s destroy
  set res
} {ex1.wav}

test configure-1.4 {configure command, get option -frequency} {
  set s [snack::sound snd -load ex1.wav]
  set res [$s configure -frequency]
  $s destroy
  set res
} 16000

test configure-1.5 {configure command, get option -format} {
  set s [snack::sound snd -load ex1.wav]
  set res [$s configure -format]
  $s destroy
  set res
} Lin16

test configure-1.6 {configure command, get option -channels} {
  set s [snack::sound snd -load ex1.wav]
  set res [$s configure -channels]
  $s destroy
  set res
} 1

test configure-1.7 {configure command, get option -byteorder} {
  set s [snack::sound snd -load ex1.wav]
  set res [$s configure -byteorder]
  $s destroy
  set res
} littleEndian

test configure-1.8 {configure command, set option -load} {
  set s [snack::sound snd]
  $s configure -load ex1.wav
  set res [$s cget -load]
  $s destroy
  set res
} {ex1.wav}

test configure-1.9 {configure command, set option -file} {
  set s [snack::sound snd]
  $s configure -file ex1.wav
  set res [$s cget -file]
  $s destroy
  set res
} {ex1.wav}

test configure-1.10 {configure command, set option -frequency} {
  set s [snack::sound snd]
  $s configure -frequency 8000
  set res [$s cget -frequency]
  $s destroy
  set res
} 8000

test configure-1.11 {configure command, set option -format} {
  set s [snack::sound snd]
  $s configure -format Mulaw
  set res [$s cget -format]
  $s destroy
  set res
} Mulaw

test configure-1.12 {configure command, set option -channels} {
  set s [snack::sound snd]
  $s configure -channels 2
  set res [$s cget -channels]
  $s destroy
  set res
} 2

test configure-1.13 {configure command, set option -byteorder} {
  set s [snack::sound snd]
  $s configure -byteorder littleEndian
  set res [$s cget -byteorder]
  $s destroy
  set res
} littleEndian

test configure-1.14 {configure command} {
  set s [snack::sound snd]
  set res [$s configure]
  $s destroy
  set res
} {0 16000 0 0 Lin16 1}

# cleanup
::tcltest::cleanupTests
return
